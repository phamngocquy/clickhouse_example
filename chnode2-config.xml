<?xml version="1.0"?>
<yandex>
  <logger>
      <level>trace</level>
      <log>/var/log/clickhouse-server/clickhouse-server.log</log>
      <errorlog>/var/log/clickhouse-server/clickhouse-server.err.log</errorlog>
      <size>1000M</size>
      <count>10</count>
  </logger>


  <listen_host>::</listen_host>
  <listen_host>0.0.0.0</listen_host>
  <listen_try>1</listen_try>

  <http_port>8123</http_port>
  <tcp_port>9000</tcp_port>
  <max_connections>4096</max_connections>
  <keep_alive_timeout>3</keep_alive_timeout>
  <max_concurrent_queries>100</max_concurrent_queries>

  <uncompressed_cache_size>8589934592</uncompressed_cache_size>
  <mark_cache_size>5368709120</mark_cache_size>
  <path>/var/lib/clickhouse/</path>
  <tmp_path>/var/lib/clickhouse/tmp/</tmp_path>
  <users_config>users.xml</users_config>
  <default_profile>default</default_profile>
  <default_database>default</default_database>
  <graphite_rollup_example>
      <pattern>
          <regexp>click_cost</regexp>
          <function>any</function>
          <retention>
              <age>0</age>
              <precision>3600</precision>
          </retention>
          <retention>
              <age>86400</age>
              <precision>60</precision>
          </retention>
      </pattern>
      <default>
          <function>max</function>
          <retention>
              <age>0</age>
              <precision>60</precision>
          </retention>
          <retention>
              <age>3600</age>
              <precision>300</precision>
          </retention>
          <retention>
              <age>86400</age>
              <precision>3600</precision>
          </retention>
      </default>
  </graphite_rollup_example>

  <keeper_server>
      <tcp_port>9181</tcp_port>
      <server_id>2</server_id>
      <log_storage_path>/var/lib/clickhouse/coordination/log</log_storage_path>
      <snapshot_storage_path>/var/lib/clickhouse/coordination/snapshots</snapshot_storage_path>

      <coordination_settings>
          <operation_timeout_ms>10000</operation_timeout_ms>
          <session_timeout_ms>30000</session_timeout_ms>
          <raft_logs_level>warning</raft_logs_level>
      </coordination_settings>

      <raft_configuration>
          <server>
              <id>1</id>
              <hostname>chnode1</hostname>
              <port>9444</port>
          </server>
          <server>
              <id>2</id>
              <hostname>chnode2</hostname>
              <port>9444</port>
          </server>
          <server>
              <id>3</id>
              <hostname>chnode3</hostname>
              <port>9444</port>
          </server>
        </raft_configuration>
  </keeper_server>
  <zookeeper>
    <node>
       <host>chnode2</host>
       <port>9181</port>
    </node>
  </zookeeper>
</yandex>
